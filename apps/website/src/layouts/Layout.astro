---
import "../styles/global.css";
import Navbar from "../components/Navbar.svelte";
import SearchDialog from "../components/SearchDialog.svelte";
import Footer from "../components/Footer.svelte";
import { themeInitScript } from "../lib/theme";

interface Props {
	title: string;
	description?: string;
}

const { title, description = "Beautiful Svelte components for building SaaS applications" } = Astro.props;
const base = import.meta.env.BASE_URL;
const siteUrl = "https://svelte.saas-ui.dev";
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content={description} />
		<meta name="viewport" content="width=device-width" />

		<!-- Preconnect to external domains -->
		<link rel="preconnect" href="https://github.com" />
		<link rel="dns-prefetch" href="https://github.com" />

		<link
			rel="icon"
			type="image/svg+xml"
			href={`${base}favicon.svg`}
		/>
		<link rel="canonical" href={`${siteUrl}${Astro.url.pathname}`} />

		<!-- Open Graph -->
		<meta property="og:type" content="website" />
		<meta property="og:title" content={`${title} | SaaS UI Svelte`} />
		<meta property="og:description" content={description} />
		<meta property="og:url" content={`${siteUrl}${Astro.url.pathname}`} />
		<meta property="og:site_name" content="SaaS UI Svelte" />

		<!-- Twitter -->
		<meta name="twitter:card" content="summary" />
		<meta name="twitter:title" content={`${title} | SaaS UI Svelte`} />
		<meta name="twitter:description" content={description} />

		<title>{title} | SaaS UI Svelte</title>
		<script is:inline define:vars={{ themeInitScript }}>
			eval(themeInitScript);
		</script>

		<script>
			document.addEventListener("keydown", (e) => {
				if (
					e.key === "Tab" &&
					!e.shiftKey &&
					document.activeElement === document.body
				) {
					const skipLink = document.getElementById("skip-link");
					if (skipLink) {
						e.preventDefault();
						skipLink.focus();
					}
				}
			});
		</script>
	</head>
	<body class="bg-bg-default text-fg-default pt-14">
		<a
			id="skip-link"
			href="#main"
			class="absolute -top-full left-0
                focus:fixed focus:top-3 focus:left-4 focus:z-9999
                focus:inline-flex focus:h-8 focus:items-center focus:justify-center focus:px-3
                focus:rounded focus:font-medium focus:text-sm focus:antialiased focus:outline-none
                focus:bg-(--colors-accent-solid) focus:text-(--colors-accent-contrast)"
		>
			Skip to main content
		</a>
		<Navbar client:load />
		<SearchDialog client:idle />
		<main id="main" class="scroll-mt-20">
			<slot />
		</main>
		<Footer client:visible />
	</body>
</html>
